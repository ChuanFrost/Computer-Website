var editIcon=function(e,t,a){return'<i class="far fa-edit"></i>'},orderTable=new Tabulator("#order-table",{layout:"fitDataFill",headerFilterPlaceholder:"Search",resizableColumns:!1,data:data,columns:[{title:"Order ID",field:"id",headerFilter:!0},{title:"Status",field:"status",headerFilter:!0},{title:"Total Price(RM)",field:"total_price",headerFilter:!0},{title:"Name",field:"name",headerFilter:!0},{title:"Email",field:"email",headerFilter:!0},{title:"Contact No.",field:"contact",headerFilter:!0},{title:"Address",field:"address",headerFilter:!0},{title:"Update Status",formatter:editIcon,align:"center",cellClick(e,t){var a=t.getData().orderlist,i=t.getData().id,r={Paid:"Paid",Shipped:"Shipped",Cancelled:"Cancelled"};"Cancelled"!=t.getData().status&&"Pending Confirmation"!=t.getData().status||(delete r.Paid,delete r.Shipped),async function(){const{value:e}=await Swal.fire({title:"Update Order Status for Order ID: "+i,input:"select",inputOptions:r,showCancelButton:!0});if(e){var t={};t.status=e,t.id=i,t.orderlist=a,jsonAjax("/Order/UpdateOrderStatus","POST",JSON.stringify(t),function(e){"Success"==e.Status&&(SwalSuccess("Status is success fully updated.",""),orderTable.setData(e.Data)),"Database Error"==e.Status&&SwalError("Database Error. Please contact administrator.","")},alertError)}}()}}],rowFormatter:function(e){var t=document.createElement("div"),a=document.createElement("div");t.style.boxSizing="border-box",t.style.padding="10px 30px",t.style.borderTop="1px solid rgba(34,36,38,.1)",t.style.background="inherit",t.id="nested",a.style.width="60%",a.style.borderRadius="1px solid #333",a.style.background="inherit",t.appendChild(a),e.getElement().appendChild(t);new Tabulator(a,{layout:"fitColumns",data:e.getData().orderlist,columns:[{title:"Name",field:"name"},{title:"Quantity",field:"qty",align:"right"},{title:"Unit Price(RM)",field:"price",align:"right"}]})}});
